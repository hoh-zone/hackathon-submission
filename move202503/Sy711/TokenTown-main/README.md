# PRD (单机版)

---

## 产品需求文档 (PRD)

---

## 1️⃣ 产品概述

### 1.1 概要

TokenTown 是一款结合SUI区块链机制与策略卡牌玩法的单机抽卡游戏，玩法基于“堆堆乐”机制，玩家通过收集并堆叠相同类型卡牌来争取更高排名。游戏节奏快，玩法上手简单，融合了链上排名与激励系统，激励玩家每日参与与付费抽卡。

### 1.2 目标用户

- 喜欢轻度策略游戏的玩家
- 区块链用户及 SUI 生态参与者
- 喜欢抽卡/收集机制的用户
- 日常愿意投入少量费用参与竞技的 Web3 玩家

### 1.3 主要优势

- 游戏设计轻量、每日可参与，操作简单
- 结合链上智能合约结算与排行榜机制，确保公平透明
- 创新玩法：最后一个提交者奖励机制
- 自带节奏控制：每日限时参与，有利于形成用户习惯

---

## 2️⃣ 特性和功能

### 2.1 核心功能

- 卡牌抽取：初始获得 30 张卡牌分配至 7 个卡槽
- 卡牌目标设定：从卡槽中选定一类卡牌为目标堆叠卡
- 堆叠机制：玩家只能将相同类型卡牌堆叠至单独卡槽
- 免费抽卡限制：每日前 6 次免费，之后每次抽卡 0.2 SUI
- 提交成绩：玩家完成堆叠后可提交卡堆结果
- 链上排名：每天链上记录所有提交成绩并进行排名
- 封盘时间：每日 22:00 停止提交，当天结束
- 特殊奖励机制：若有用户付费抽卡，最后一位提交者可获得金库中 1/5 的奖金

### 2.2 用户故事

- 作为一个新用户，我可以每天免费抽卡 6 次，探索游戏玩法。
- 作为一个老玩家，我愿意付费抽更多卡牌来优化堆叠结果。
- 作为一个策略玩家，我希望最后一位提交的机制能为我带来额外收益。
- 作为一个竞赛爱好者，我可以通过参与排名挑战其他玩家。

---

## 3️⃣ 技术架构

### 3.1 智能合约设计

### 核心功能

- `submit_result(address player, u8 card_type, u8 amount)`: 玩家提交结果，记录卡堆类型与数量
- `end_day(address last_submitter)`: 由最后提交的玩家触发，进行链上排名结算，并奖励其 1/5 金库金额
- `claim_reward(address player)`: 允许当日上榜玩家领取奖励
- `get_today_ranking()`: 返回当前排行榜数据
- `get_daily_limit(address player)`: 查询玩家当日抽卡次数

### 数据结构

- 玩家提交记录（按天索引）
- 排行榜信息（每天一个）
- 金库总额追踪与分配

### 3.2 前端和钱包集成

- 使用 SUI 钱包（如 Suiet）连接钱包进行支付与签名操作
- SWR 实现每日状态拉取（抽卡次数、是否已提交）
- 前端显示当前卡堆情况、排行榜与奖励状态

---

## 4️⃣ 用户流程图

```
进入游戏 → 领取初始卡牌 → 设置目标卡 → 开始堆叠 → 免费抽卡 ≤ 6 次 → 付费抽卡(可选) → 提交成绩 → 等待22点 → 排行榜更新 → 排名奖励与最后提交奖励

```

---

## 5️⃣ 货币化模式

- 每次超过6次抽卡：0.2 SUI，全部进入链上金库
- 金库分配机制：
    - 排名前若干玩家可获得金库奖励
    - 若当日有人付费抽卡，最后提交者可获得 1/5 金库奖励

---

## 6️⃣ 总结

TokenTown 将抽卡、策略堆叠与链上排名机制结合，通过每日参与与奖励模式激励用户持续参与。结合封盘时间、最后提交激励、以及轻量的单机玩法，使其既具娱乐性也具 Web3 激励逻辑。下一步可逐步拓展 PvP 排位赛制、赛季机制与 NFT 卡牌系统。

